<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head"></head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">

    <div th:replace="fragments/navbar :: navbar"></div>
    <div th:replace="fragments/sidebar :: sidebar"></div>

    <div class="content-wrapper">
        <section class="content pt-4">
            <div class="container-fluid">

                <h2>ğŸ§¾ Editar Factura <span id="invoice-ref" class="text-muted"></span></h2>

                <!-- InformaciÃ³n del cliente -->
                <div class="form-group">
                    <label>ğŸ‘¤ Cliente</label>
                    <input type="text" id="clienteInfo" class="form-control" readonly>
                </div>

                <form id="facturaForm">
                    <div class="form-group">
                        <label>ğŸ“„ DescripciÃ³n</label>
                        <input type="text" id="descripcion" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>ğŸ“… Fecha</label>
                        <input type="date" id="fecha" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>ğŸ“Œ Estado</label>
                        <select id="estado" class="form-control">
                            <option>DRAFT</option>
                            <option>SENT</option>
                            <option>PAID</option>
                            <option>CANCELLED</option>
                        </select>
                    </div>

                    <h4 class="mt-4">ğŸ“‹ LÃ­neas de Factura</h4>
                    <button type="button" class="btn btn-secondary mb-2"  id="btnAgregarLinea" onclick="agregarLinea()">â• AÃ±adir lÃ­nea</button>

                    <table class="table table-bordered">
                        <thead class="thead-dark">
                        <tr>
                            <th>DescripciÃ³n</th>
                            <th>Cantidad</th>
                            <th>Precio</th>
                            <th>Total</th>
                            <th>AcciÃ³n</th>
                        </tr>
                        </thead>
                        <tbody id="lineas-factura">
                        <!-- Cargado por JS -->
                        </tbody>
                    </table>

                    <div class="form-group text-right font-weight-bold">
                        Total + IVA: <span id="totalFactura" class="ml-2">0.00 â‚¬</span>
                    </div>

                    <div class="mt-3">
                        <button type="button" class="btn btn-success" id="btnGuardar">ğŸ’¾ Guardar</button>
                        <button type="button" class="btn btn-warning" id="btnEmitir">ğŸ“¤ Emitir</button>
                        <button type="button" class="btn btn-primary" id="btnPDF">ğŸ“ Ver PDF</button>
                        <button id="btnPagar" class="btn btn-success">ğŸ’° Marcar como Pagada</button>
                        <button id="btnCancelar" class="btn btn-warning">âŒ Cancelar factura</button>
                        <button type="button" class="btn btn-secondary" onclick="window.location.href='/facturas'">âŒ Cancelar ediciÃ³n</button>
                    </div>
                </form>

            </div>
        </section>
    </div>

    <div th:replace="fragments/footer :: footer"></div>

</div>

<!-- Scripts -->
<script th:src="@{/plugins/jquery/jquery.min.js}"></script>
<script th:src="@{/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/dist/js/adminlte.min.js}"></script>
<script th:src="@{/js/factura-editar.js}"></script>

</body>
</html>
